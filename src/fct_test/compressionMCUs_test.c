#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include "../../include/compressionMCUs.h"

int main() {
    // Test avec invader
    uint8_t Y_block_invader[1][LINEAR_BLOCK_SIZE] = {{
        0x00, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0x00,
        0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00,
        0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00,
        0xff, 0xff, 0x00, 0xff, 0xff, 0x00, 0xff, 0xff,
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
        0x00, 0x00, 0xff, 0x00, 0x00, 0xff, 0x00, 0x00,
        0x00, 0xff, 0x00, 0xff, 0xff, 0x00, 0xff, 0x00,
        0xff, 0x00, 0xff, 0x00, 0x00, 0xff, 0x00, 0xff
    }};

    char PGM_PPM[] = "P5";
    uint32_t number_of_MCU = 1;

    FILE *file_ptr = fopen("compressionMCU_invader.test", "wb");
    if (file_ptr == NULL) {
        printf("Erreur lors de l'ouverture du fichier.");
        return EXIT_FAILURE;
    }

    bitstream_MCUs(file_ptr, PGM_PPM, Y_block_invader, 1, NULL, 0, NULL, 0, number_of_MCU);

    fclose(file_ptr);

    return EXIT_SUCCESS;
}
